{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../utils/baseurl\"; //--------------------------------------------------------------------------------------------------------\n//register action : \n//thunk created\n\nexport const registerUserAction = createAsyncThunk(\"users/register\", //action type\nasync (user, _ref) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n\n  //user is the payload\n  //rejectedwithValue-- helps us give exact error to the user\n  //getState---- gives us a snapshot of what is in our entire state\n  //dispatch-----helps dispatch another action inside this action\n  try {\n    //http call\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const {\n      data\n    } = await axios.post( //api end-point\n    `${baseUrl}/api/users/register`, //payload:things we need to be able to register a user\n    user, //config\n    config);\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //----------------------------------------------------------------------------------------------------------\n//login----------------------------------\n\nexport const loginUserAction = createAsyncThunk('user/login', async (userData, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  const config = {\n    headers: {\n      'content-type': 'application/json'\n    }\n  };\n\n  try {\n    //make http call\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/users/login`, userData, config); //save user into local storage\n\n    localStorage.setItem('userInfo'.JSON.stringify(userData));\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //------------------------------------------------------------------------------------------------------------------------\n//register\n//createslices gives reducers and actionCreators both\n\nconst usersSlices = createSlice({\n  name: \"users\",\n  //reducer needs a state\n  initialState: {\n    userAuth: \"login\"\n  },\n  //object notation\n  extraReducers: builder => {\n    //register\n    builder.addCase(registerUserAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(registerUserAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.registered = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined; //since successful\n\n      state.serverErr = undefined;\n    });\n    builder.addCase(registerUserAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message; //sice failed\n\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    }); //----------------------===========================------------------------------------\n    //login slices\n\n    builder.addCase(loginUserAction.pending, (state, action) => {\n      state.loading = true;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(loginUserAction.fulfilled, (state, action) => {\n      state.userAuth = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(loginUserAction.rejected, (state, action) => {\n      var _action$payload2, _action$payload3;\n\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.message;\n      state.loading = false;\n    });\n  }\n});\nexport default usersSlices.reducer; //for createAsyncThunk any action you create it gives:\n//1. pending\n//2.fulfilled\n//3.rejected","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","baseUrl","registerUserAction","user","rejectWithValue","getState","dispatch","config","headers","data","post","error","response","loginUserAction","userData","localStorage","setItem","JSON","stringify","usersSlices","name","initialState","userAuth","extraReducers","builder","addCase","pending","state","action","loading","fulfilled","registered","payload","appErr","undefined","serverErr","rejected","message","reducer"],"sources":["C:/Users/Apoorva/Desktop/udemy/blog-frontend/src/redux/slices/users/usersSlices.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { baseUrl } from \"../../../utils/baseurl\";\r\n//--------------------------------------------------------------------------------------------------------\r\n//register action : \r\n//thunk created\r\nexport const registerUserAction = createAsyncThunk(\r\n  \"users/register\", //action type\r\n  async (user, { rejectWithValue, getState, dispatch }) => {\r\n    //user is the payload\r\n      //rejectedwithValue-- helps us give exact error to the user\r\n      //getState---- gives us a snapshot of what is in our entire state\r\n      //dispatch-----helps dispatch another action inside this action\r\n    try {\r\n      //http call\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n      const { data } = await axios.post(\r\n          //api end-point\r\n        `${baseUrl}/api/users/register`,\r\n        //payload:things we need to be able to register a user\r\n        user,\r\n        //config\r\n        config\r\n      );\r\n      return data;\r\n    } catch (error) {\r\n      if (!error?.response) {\r\n        throw error;\r\n      }\r\n      return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n//----------------------------------------------------------------------------------------------------------\r\n//login----------------------------------\r\nexport const loginUserAction=createAsyncThunk(\r\n  'user/login',\r\n async (userData,{rejectWithValue,getState,dispatch})=>{\r\n   const config={\r\n     headers: {\r\n       'content-type': 'application/json',\r\n     },\r\n   };\r\n   try {\r\n     //make http call\r\n     const {data}=await axios.post(`${baseUrl}/api/users/login`, userData, config);\r\n     //save user into local storage\r\n     localStorage.setItem('userInfo'.JSON.stringify(userData));\r\n     return data;\r\n   }catch(error){\r\n      if(!error?.response){\r\n        throw error;\r\n      }\r\n      return rejectWithValue(error?.response?.data);\r\n   }\r\n }\r\n);\r\n//------------------------------------------------------------------------------------------------------------------------\r\n//register\r\n//createslices gives reducers and actionCreators both\r\n\r\nconst usersSlices = createSlice({\r\n    name: \"users\",\r\n    //reducer needs a state\r\n    initialState: {\r\n      userAuth: \"login\",\r\n    },\r\n    //object notation\r\n    extraReducers: (builder) => {\r\n      //register\r\n    \r\n      builder.addCase(registerUserAction.pending, (state, action) => {\r\n        state.loading = true;\r\n      });\r\n      builder.addCase(registerUserAction.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.registered = action?.payload;\r\n        state.appErr = undefined; //since successful\r\n        state.serverErr = undefined;\r\n      });\r\n      builder.addCase(registerUserAction.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.appErr = action?.payload?.message; //sice failed\r\n        state.serverErr = action?.error?.message;\r\n      });\r\n\r\n      //----------------------===========================------------------------------------\r\n      //login slices\r\n      builder.addCase(loginUserAction.pending, (state, action) => {\r\n        state.loading=true;\r\n        state.appErr=undefined;\r\n        state.serverErr=undefined;\r\n      });\r\n      builder.addCase(loginUserAction.fulfilled, (state, action) => {\r\n        state.userAuth=action?.payload;\r\n        state.loading=false;\r\n        state.appErr=undefined;\r\n        state.serverErr=undefined;\r\n      });\r\n      builder.addCase(loginUserAction.rejected,(state, action)=>{\r\n        state.appErr=action?.payload?.message;\r\n        state.serverErr=action?.payload?.message;\r\n        state.loading=false;\r\n      });\r\n    },\r\n  });\r\n  \r\n  export default usersSlices.reducer;\r\n  \r\n\r\n  //for createAsyncThunk any action you create it gives:\r\n  //1. pending\r\n  //2.fulfilled\r\n  //3.rejected\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}