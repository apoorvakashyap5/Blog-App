{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../utils/baseurl\"; //action\n\nexport const createCategoryAction = createAsyncThunk(\"category/create\", async (category, _ref) => {\n  var _getState;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  //getuser token to be able to create post\n  const user = (_getState = getState()) === null || _getState === void 0 ? void 0 : _getState.users; // console.log(user)\n\n  const {\n    userAuth\n  } = user; // console.log(userAuth?.token); // got token in console. now pass it as header\n\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userAuth === null || userAuth === void 0 ? void 0 : userAuth.token}`\n    }\n  }; //http call\n\n  try {\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/category`, {\n      title: category === null || category === void 0 ? void 0 : category.title\n    }, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //---------------------------------------------------------------------------\n//action of fetching categories\n\nexport const fetchCategoriesAction = createAsyncThunk(\"category/fetch\", async (category, _ref2) => {\n  var _getState2;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  //get user token\n  const user = (_getState2 = getState()) === null || _getState2 === void 0 ? void 0 : _getState2.users;\n  const {\n    userAuth\n  } = user;\n  console.log(userAuth === null || userAuth === void 0 ? void 0 : userAuth.token);\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userAuth === null || userAuth === void 0 ? void 0 : userAuth.token}`\n    }\n  }; //http call\n\n  try {\n    const {\n      data\n    } = await axios.get(`${baseUrl}/api/category`, config);\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //slices\n\nconst categorySlices = createSlice({\n  name: \"category\",\n  initialState: {},\n  extraReducers: builder => {\n    //create===================================================================\n    builder.addCase(createCategoryAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(createCategoryAction.fulfilled, (state, action) => {\n      state.category = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createCategoryAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    }); //fetchALLcategories==========================================================================\n\n    builder.addCase(fetchCategoriesAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchCategoriesAction.fulfilled, (state, action) => {\n      state.categoryList = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchCategoriesAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.message;\n    });\n  }\n});\nexport default categorySlices.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","baseUrl","createCategoryAction","category","rejectWithValue","getState","dispatch","user","users","userAuth","config","headers","Authorization","token","data","post","title","error","response","fetchCategoriesAction","console","log","get","categorySlices","name","initialState","extraReducers","builder","addCase","pending","state","action","loading","fulfilled","payload","appErr","undefined","serverErr","rejected","message","categoryList","reducer"],"sources":["C:/Users/Apoorva/Desktop/udemy/blog-frontend/src/redux/slices/category/categorySlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { baseUrl } from \"../../../utils/baseurl\";\r\n\r\n\r\n//action\r\nexport const createCategoryAction = createAsyncThunk(\r\n  \"category/create\",\r\n  async (category, { rejectWithValue, getState, dispatch }) => {\r\n    //getuser token to be able to create post\r\n    const user=getState()?.users;\r\n   // console.log(user)\r\n   const {userAuth}=user;\r\n   // console.log(userAuth?.token); // got token in console. now pass it as header\r\n   const config={\r\n     headers: {\r\n       Authorization:`Bearer ${userAuth?.token}`,\r\n     },\r\n   };\r\n    //http call\r\n    try {\r\n      const { data } = await axios.post(`${baseUrl}/api/category`, {\r\n        title: category?.title,\r\n      },\r\n      config);\r\n      return data;\r\n    } catch (error) {\r\n      if (!error?.response) {\r\n        throw error;\r\n      }\r\n      return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n//---------------------------------------------------------------------------\r\n//action of fetching categories\r\nexport const fetchCategoriesAction = createAsyncThunk(\r\n  \"category/fetch\",\r\n  async (category, { rejectWithValue, getState, dispatch }) => {\r\n    //get user token\r\n    const user = getState()?.users;\r\n    const { userAuth } = user;\r\n    console.log(userAuth?.token);\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userAuth?.token}`,\r\n      },\r\n    };\r\n    //http call\r\n    try {\r\n      const { data } = await axios.get(`${baseUrl}/api/category`, config);\r\n      return data;\r\n    } catch (error) {\r\n      if (!error?.response) {\r\n        throw error;\r\n      }\r\n      return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n//slices\r\n\r\nconst categorySlices = createSlice({\r\n  name: \"category\",\r\n  initialState: { },\r\n  extraReducers: builder => {\r\n    //create===================================================================\r\n    builder.addCase(createCategoryAction.pending, (state, action) => {\r\n      state.loading = true;\r\n    });\r\n    builder.addCase(createCategoryAction.fulfilled, (state, action) => {\r\n      state.category = action?.payload;\r\n      state.loading = false;\r\n      state.appErr = undefined;\r\n      state.serverErr = undefined;\r\n    });\r\n    builder.addCase(createCategoryAction.rejected, (state, action) => {\r\n      state.loading = false;\r\n      state.appErr = action?.payload?.message;\r\n      state.serverErr = action?.error?.message;\r\n    });\r\n    //fetchALLcategories==========================================================================\r\n    builder.addCase(fetchCategoriesAction.pending, (state, action)=>{\r\n      state.loading=true;\r\n    });\r\n    builder.addCase(fetchCategoriesAction.fulfilled, (state, action)=>{\r\n    state.categoryList=action?.payload;\r\n    state.loading=false;\r\n    state.appErr=undefined;\r\n    state.serverErr=undefined;\r\n    });\r\n    builder.addCase(fetchCategoriesAction.rejected, (state,action)=>{\r\n      state.loading=false;\r\n      state.appErr=action?.payload?.message;\r\n      state.serverErr=action?.error?.message;\r\n    });\r\n  },\r\n});\r\n\r\nexport default categorySlices.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}