{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../utils/baseurl\"; //create comment \n//action\n\nexport const createCommentAction = createAsyncThunk(\"comment/create\", async (comment, _ref) => {\n  var _getState;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  //getuser token to be able to create post\n  const user = (_getState = getState()) === null || _getState === void 0 ? void 0 : _getState.users; // console.log(user)\n\n  const {\n    userAuth\n  } = user; // console.log(userAuth?.token); // got token in console. now pass it as header\n\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userAuth === null || userAuth === void 0 ? void 0 : userAuth.token}`\n    }\n  }; //http call\n\n  try {\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/comments`, {\n      description: comment === null || comment === void 0 ? void 0 : comment.description,\n      postId: comment === null || comment === void 0 ? void 0 : comment.postId\n    }, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //handle slices\n\nconst commentSlices = createSlice({\n  name: 'comment',\n  initialValues: {},\n  extraReducers: builder => {\n    builder.addCase(createCommentAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(createCommentAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.commentCreated = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createCommentAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.commentCreated = undefined;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    });\n  }\n});\nexport default commentSlices.reducers;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","baseUrl","createCommentAction","comment","rejectWithValue","getState","dispatch","user","users","userAuth","config","headers","Authorization","token","data","post","description","postId","error","response","commentSlices","name","initialValues","extraReducers","builder","addCase","pending","state","action","loading","fulfilled","commentCreated","payload","appErr","undefined","serverErr","rejected","message","reducers"],"sources":["C:/Users/Apoorva/Desktop/udemy/blog-frontend/src/redux/slices/comments/commentSlices.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { baseUrl } from \"../../../utils/baseurl\";\r\n\r\n\r\n//create comment \r\n\r\n\r\n\r\n//action\r\nexport const createCommentAction = createAsyncThunk(\r\n  \"comment/create\",\r\n  async (comment, { rejectWithValue, getState, dispatch }) => {\r\n    //getuser token to be able to create post\r\n    const user=getState()?.users;\r\n   // console.log(user)\r\n   const {userAuth}=user;\r\n   // console.log(userAuth?.token); // got token in console. now pass it as header\r\n   const config={\r\n     headers: {\r\n       Authorization:`Bearer ${userAuth?.token}`,\r\n     },\r\n   };\r\n    //http call\r\n    try {\r\n      const { data } = await axios.post(`${baseUrl}/api/comments`, {\r\n        description: comment?.description,\r\n        postId: comment?.postId,\r\n      },\r\n      config);\r\n      return data;\r\n    } catch (error) {\r\n      if (!error?.response) {\r\n        throw error;\r\n      }\r\n      return rejectWithValue(error?.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n//handle slices\r\n\r\nconst commentSlices=createSlice({\r\n    name: 'comment',\r\n    initialValues:{},\r\n    extraReducers:builder=>{\r\n        builder.addCase(createCommentAction.pending, (state, action)=>{\r\n            state.loading=true;\r\n        });\r\n        builder.addCase(createCommentAction.fulfilled, (state, action)=>{\r\n            state.loading=false;\r\n            state.commentCreated=action?.payload;\r\n            state.appErr=undefined;\r\n            state.serverErr=undefined;\r\n        });\r\n        builder.addCase(createCommentAction.rejected, (state, action)=>{\r\n            state.loading=false;\r\n            state.commentCreated=undefined;\r\n            state.appErr=action?.payload?.message;\r\n            state.serverErr=action?.error?.message;\r\n        });\r\n    },\r\n});\r\n\r\nexport default commentSlices.reducers;"],"mappings":"AAAA,SAAQA,gBAAR,EAA0BC,WAA1B,QAA4C,kBAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,wBAAxB,C,CAGA;AAIA;;AACA,OAAO,MAAMC,mBAAmB,GAAGJ,gBAAgB,CACjD,gBADiD,EAEjD,OAAOK,OAAP,WAA4D;EAAA;;EAAA,IAA5C;IAAEC,eAAF;IAAmBC,QAAnB;IAA6BC;EAA7B,CAA4C;EAC1D;EACA,MAAMC,IAAI,gBAACF,QAAQ,EAAT,8CAAC,UAAYG,KAAvB,CAF0D,CAG3D;;EACA,MAAM;IAACC;EAAD,IAAWF,IAAjB,CAJ2D,CAK3D;;EACA,MAAMG,MAAM,GAAC;IACXC,OAAO,EAAE;MACPC,aAAa,EAAE,UAASH,QAAV,aAAUA,QAAV,uBAAUA,QAAQ,CAAEI,KAAM;IADjC;EADE,CAAb,CAN2D,CAW1D;;EACA,IAAI;IACF,MAAM;MAAEC;IAAF,IAAW,MAAMd,KAAK,CAACe,IAAN,CAAY,GAAEd,OAAQ,eAAtB,EAAsC;MAC3De,WAAW,EAAEb,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEa,WADqC;MAE3DC,MAAM,EAAEd,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEc;IAF0C,CAAtC,EAIvBP,MAJuB,CAAvB;IAKA,OAAOI,IAAP;EACD,CAPD,CAOE,OAAOI,KAAP,EAAc;IAAA;;IACd,IAAI,EAACA,KAAD,aAACA,KAAD,eAACA,KAAK,CAAEC,QAAR,CAAJ,EAAsB;MACpB,MAAMD,KAAN;IACD;;IACD,OAAOd,eAAe,CAACc,KAAD,aAACA,KAAD,0CAACA,KAAK,CAAEC,QAAR,oDAAC,gBAAiBL,IAAlB,CAAtB;EACD;AACF,CA3BgD,CAA5C,C,CA8BP;;AAEA,MAAMM,aAAa,GAACrB,WAAW,CAAC;EAC5BsB,IAAI,EAAE,SADsB;EAE5BC,aAAa,EAAC,EAFc;EAG5BC,aAAa,EAACC,OAAO,IAAE;IACnBA,OAAO,CAACC,OAAR,CAAgBvB,mBAAmB,CAACwB,OAApC,EAA6C,CAACC,KAAD,EAAQC,MAAR,KAAiB;MAC1DD,KAAK,CAACE,OAAN,GAAc,IAAd;IACH,CAFD;IAGAL,OAAO,CAACC,OAAR,CAAgBvB,mBAAmB,CAAC4B,SAApC,EAA+C,CAACH,KAAD,EAAQC,MAAR,KAAiB;MAC5DD,KAAK,CAACE,OAAN,GAAc,KAAd;MACAF,KAAK,CAACI,cAAN,GAAqBH,MAArB,aAAqBA,MAArB,uBAAqBA,MAAM,CAAEI,OAA7B;MACAL,KAAK,CAACM,MAAN,GAAaC,SAAb;MACAP,KAAK,CAACQ,SAAN,GAAgBD,SAAhB;IACH,CALD;IAMAV,OAAO,CAACC,OAAR,CAAgBvB,mBAAmB,CAACkC,QAApC,EAA8C,CAACT,KAAD,EAAQC,MAAR,KAAiB;MAAA;;MAC3DD,KAAK,CAACE,OAAN,GAAc,KAAd;MACAF,KAAK,CAACI,cAAN,GAAqBG,SAArB;MACAP,KAAK,CAACM,MAAN,GAAaL,MAAb,aAAaA,MAAb,0CAAaA,MAAM,CAAEI,OAArB,oDAAa,gBAAiBK,OAA9B;MACAV,KAAK,CAACQ,SAAN,GAAgBP,MAAhB,aAAgBA,MAAhB,wCAAgBA,MAAM,CAAEV,KAAxB,kDAAgB,cAAemB,OAA/B;IACH,CALD;EAMH;AAnB2B,CAAD,CAA/B;AAsBA,eAAejB,aAAa,CAACkB,QAA7B"},"metadata":{},"sourceType":"module"}